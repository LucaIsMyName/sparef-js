{"version":3,"file":"sparef.umd.js","sources":["../src/prefetch.ts","../src/utils.ts","../src/transition.ts","../src/sparef.ts"],"sourcesContent":["// src/prefetch.ts\n\nimport { PrefetchOptions } from './types';\n\nconst prefetchedLinks = new Set<string>();\n\nexport function setupPrefetch(container: Element, options: PrefetchOptions): void {\n  if (!options.active) return;\n\n  const links = container.querySelectorAll('a[href^=\"/\"], a[href^=\"./\"], a[href^=\"../\"]');\n\n  links.forEach(link => {\n    link.addEventListener(options.event, () => {\n      setTimeout(() => {\n        const href = link.getAttribute('href');\n        if (href && !prefetchedLinks.has(href)) {\n          const prefetchLink = document.createElement('link');\n          prefetchLink.rel = 'prefetch';\n          prefetchLink.href = href;\n          document.head.appendChild(prefetchLink);\n          prefetchedLinks.add(href);\n          console.log('Prefetched: ', href);\n        }\n      }, options.delay);\n    });\n  });\n}","// src/utils.ts\n\nexport function applyDefaults<T extends Record<string, any>>(options: Partial<T>, defaults: T): T {\n  const result = { ...defaults };\n  for (const key in options) {\n    if (Object.prototype.hasOwnProperty.call(options, key)) {\n      const value = options[key];\n      if (typeof value === 'object' && value !== null && key in result) {\n        result[key] = applyDefaults(\n          value as Partial<T[Extract<keyof T, string>]>,\n          result[key] as T[Extract<keyof T, string>]\n        );\n      } else {\n        result[key] = value as T[Extract<keyof T, string>];\n      }\n    }\n  }\n  return result;\n}\n\nexport function kebabCase(str: string): string {\n  return str.replace(/[A-Z]/g, letter => `-${letter.toLowerCase()}`);\n}","// src/transition.ts\n\nimport { TransitionOptions, TransitionAnimation, TransitionStyles } from \"./types\";\nimport { kebabCase } from \"./utils\";\n\ndeclare global {\n  interface Document {\n    startViewTransition?: (callback: () => void) => {\n      finished: Promise<void>;\n      updateCallbackDone: Promise<void>;\n      ready: Promise<void>;\n    };\n  }\n}\n\nlet styleCounter = 0;\n\nexport function setupTransition(container: Element, options: TransitionOptions, animateFunction: (keyframes: Keyframe[], options: KeyframeAnimationOptions) => Animation = (el, opts) => container.animate(el, opts)): void {\n  const links = container.querySelectorAll('a[href^=\"/\"], a[href^=\"./\"], a[href^=\"../\"]');\n\n  links.forEach((link) => {\n    link.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      const href = link.getAttribute(\"href\");\n\n      if (href) {\n        if (document.startViewTransition) {\n          performViewTransition(href, container, options, animateFunction);\n        } else {\n          performFallbackTransition(href, container, options, animateFunction);\n        }\n      }\n    });\n  });\n}\n\nexport function generateStyleString(animation: TransitionAnimation): { from: string; to: string } {\n  const from = Object.entries(animation.from)\n    .map(([key, value]) => `${kebabCase(key)}: ${value};`)\n    .join(\" \");\n  const to = Object.entries(animation.to)\n    .map(([key, value]) => `${kebabCase(key)}: ${value};`)\n    .join(\" \");\n\n  return { from, to };\n}\n\nfunction addViewTransitionCSS(container: Element, options: TransitionOptions): string {\n  const outStyles = generateStyleString(options.out);\n  const inStyles = generateStyleString(options.in);\n  const styleId = `sparef-style-${styleCounter++}`;\n\n  const css = `\n    ::view-transition-old(${container.tagName.toLowerCase()}),\n    ::view-transition-new(${container.tagName.toLowerCase()}) {\n      animation-duration: ${options.duration}ms;\n      animation-timing-function: ${options.easing};\n      animation-iteration-count: ${options.iterations};\n    }\n\n    ::view-transition-old(${container.tagName.toLowerCase()}) {\n      animation-name: sparef_fade-out-${styleId};\n    }\n\n    ::view-transition-new(${container.tagName.toLowerCase()}) {\n      animation-name: sparef_fade-in-${styleId};\n    }\n\n    @keyframes sparef_fade-out-${styleId} {\n      from { ${outStyles.from} }\n      to { ${outStyles.to} }\n    }\n\n    @keyframes sparef_fade-in-${styleId} {\n      from { ${inStyles.from} }\n      to { ${inStyles.to} }\n    }\n  `;\n\n  const style = document.createElement(\"style\");\n  style.id = styleId;\n  style.textContent = css;\n  document.head.appendChild(style);\n\n  return styleId;\n}\n\nfunction removeStyle(styleId: string): void {\n  const style = document.getElementById(styleId);\n  if (style) {\n    style.remove();\n  }\n}\n\nasync function performViewTransition(href: string, container: Element, options: TransitionOptions, animateFunction: (keyframes: Keyframe[], options: KeyframeAnimationOptions) => Animation): Promise<void> {\n  try {\n    const styleId = addViewTransitionCSS(container, options);\n    const transition = document.startViewTransition!(() => updateDOM(href, container, options, animateFunction));\n\n    await transition.finished;\n    removeStyle(styleId);\n    console.log(\"Custom Transition complete\");\n  } catch (error) {\n    console.error(\"View transition failed:\", error);\n    window.location.href = href;\n  }\n}\n\nasync function performFallbackTransition(href: string, container: Element, options: TransitionOptions, animateFunction: (keyframes: Keyframe[], options: KeyframeAnimationOptions) => Animation): Promise<void> {\n  const styleId = addViewTransitionCSS(container, options);\n  const duration = options.duration;\n  const outAnim = createKeyframeAnimation(options.out, `out-${styleId}`);\n  const inAnim = createKeyframeAnimation(options.in, `in-${styleId}`);\n\n  const outAnimation = animateFunction(outAnim.keyframes, {\n    duration: options.timeline === \"sequential\" ? duration / 2 : duration,\n    easing: options.easing,\n    iterations: 1,\n    fill: \"forwards\",\n  });\n\n  await outAnimation.finished;\n\n  await updateDOM(href, container, options, animateFunction);\n\n  const inAnimation = animateFunction(inAnim.keyframes, {\n    duration: options.timeline === \"sequential\" ? duration / 2 : duration,\n    easing: options.easing,\n    iterations: 1,\n    fill: \"forwards\",\n  });\n\n  await inAnimation.finished;\n  removeStyle(styleId);\n  console.log(\"Fallback Transition complete\");\n}\n\nasync function updateDOM(href: string, container: Element, options: TransitionOptions, animateFunction: (keyframes: Keyframe[], options: KeyframeAnimationOptions) => Animation): Promise<void> {\n  try {\n    const response = await fetch(href);\n    const html = await response.text();\n    const newDocument = new DOMParser().parseFromString(html, \"text/html\");\n\n    // Update the page title\n    document.title = newDocument.title;\n\n    // Update the specific container content\n    const newContent = newDocument.querySelector(container.tagName);\n    if (newContent) {\n      container.innerHTML = newContent.innerHTML;\n    }\n\n    // Update the URL without reloading the page\n    window.history.pushState({}, \"\", href);\n\n    // Re-attach event listeners to the new content\n    setupTransition(container, options, animateFunction);\n  } catch (error) {\n    console.error(\"Failed to update DOM:\", error);\n    window.location.href = href;\n  }\n}\n\nfunction createKeyframeAnimation(animOptions: TransitionAnimation, prefix: string): { keyframes: Keyframe[] } {\n  const fromStyles = Object.entries(animOptions.from as TransitionStyles)\n    .map(([key, value]) => `${kebabCase(key)}: ${value};`)\n    .join(\" \");\n  const toStyles = Object.entries(animOptions.to as TransitionStyles)\n    .map(([key, value]) => `${kebabCase(key)}: ${value};`)\n    .join(\" \");\n\n  return {\n    keyframes: [\n      { [prefix]: \"0%\", ...animOptions.from },\n      { [prefix]: \"100%\", ...animOptions.to },\n    ],\n  };\n}\n","// src/sparef.ts\n\nimport { setupPrefetch } from \"./prefetch\";\nimport { setupTransition } from \"./transition\";\nimport { applyDefaults } from \"./utils\";\nimport { SparefOptions, PrefetchOptions, TransitionOptions } from \"./types\";\n\nconst defaultOptions: SparefOptions = {\n  prefetch: {\n    active: false,\n    event: \"mouseover\",\n    delay: 0,\n  },\n  transition: {\n    duration: 300,\n    delay: 0,\n    timeline: \"sequential\",\n    easing: \"ease\",\n    iterations: 1,\n    out: {\n      from: { opacity: 1 },\n      to: { opacity: 0 },\n    },\n    in: {\n      from: { opacity: 0 },\n      to: { opacity: 1 },\n    },\n  },\n};\n\nexport function sparef(selector: string | string[], options: Partial<SparefOptions> = {}): void {\n  const mergedOptions = applyDefaults(options, defaultOptions);\n\n  const selectors = Array.isArray(selector) ? selector : [selector];\n\n  selectors.forEach((sel) => {\n    const container = document.querySelector(sel);\n    if (!container) {\n      console.error(`No element found with selector: ${sel}`);\n      return;\n    }\n\n    setupPrefetch(container, mergedOptions.prefetch);\n    setupTransition(container, mergedOptions.transition);\n  });\n}\n\nexport default sparef;"],"names":[],"mappings":"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"}