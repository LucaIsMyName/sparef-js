{"mappings":"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","sources":["src/sparef.ts","src/prefetch.ts","src/transition.ts","src/utils.ts"],"sourcesContent":["// src/href.ts\n\nimport { setupPrefetch } from './prefetch';\nimport { setupTransition } from './transition';\nimport { applyDefaults } from './utils';\nimport { HrefOptions, PrefetchOptions, TransitionOptions } from './types';\n\nconst defaultOptions: HrefOptions = {\n  prefetch: {\n    active: false,\n    event: 'mouseover',\n    delay: 0\n  },\n  transition: {\n    duration: 300,\n    delay: 0,\n    timeline: 'sequential',\n    out: {\n      from: { opacity: 1 },\n      to: { opacity: 0 }\n    },\n    in: {\n      from: { opacity: 0 },\n      to: { opacity: 1 }\n    }\n  }\n};\nexport function href(selector: string, options: Partial<HrefOptions> = {}): void {\n  const mergedOptions = applyDefaults(options, defaultOptions);\n  \n  const container = document.querySelector(selector);\n  if (!container) {\n    console.error(`No element found with selector: ${selector}`);\n    return;\n  }\n\n  setupPrefetch(container, mergedOptions.prefetch);\n  setupTransition(container, mergedOptions.transition);\n}\n\nexport default href;","// src/prefetch.ts\n\nimport { PrefetchOptions } from './types';\n\nexport function setupPrefetch(container: Element, options: PrefetchOptions): void {\n  if (!options.active) return;\n\n  const links = container.querySelectorAll('a[href^=\"/\"], a[href^=\"./\"], a[href^=\"../\"]');\n\n  links.forEach(link => {\n    link.addEventListener(options.event, () => {\n      setTimeout(() => {\n        const href = link.getAttribute('href');\n        if (href) {\n          const prefetchLink = document.createElement('link');\n          prefetchLink.rel = 'prefetch';\n          prefetchLink.href = href;\n          document.head.appendChild(prefetchLink);\n        }\n      }, options.delay);\n    });\n  });\n}","// src/transition.ts\n\nimport { TransitionOptions, TransitionAnimation, TransitionStyles } from './types';\nimport { kebabCase } from './utils';\n\ndeclare global {\n  interface Document {\n    startViewTransition?: (callback: () => void) => {\n      finished: Promise<void>;\n      updateCallbackDone: Promise<void>;\n      ready: Promise<void>;\n    };\n  }\n}\n\nexport function setupTransition(container: Element, options: TransitionOptions): void {\n  const links = container.querySelectorAll('a[href^=\"/\"], a[href^=\"./\"], a[href^=\"../\"]');\n\n  links.forEach(link => {\n    link.addEventListener('click', (e) => {\n      e.preventDefault();\n      const href = link.getAttribute('href');\n      \n      if (href) {\n        if (document.startViewTransition) {\n          performViewTransition(href, options);\n        } else {\n          performFallbackTransition(href, options);\n        }\n      }\n    });\n  });\n}\n\nasync function performViewTransition(href: string, options: TransitionOptions): Promise<void> {\n  try {\n    const transition = document.startViewTransition!(() => {\n      window.location.href = href;\n    });\n\n    await transition.finished;\n  } catch (error) {\n    console.error('View transition failed:', error);\n    window.location.href = href;\n  }\n}\n\nfunction performFallbackTransition(href: string, options: TransitionOptions): void {\n  const duration = options.duration;\n  const outAnim = createKeyframeAnimation(options.out, 'out');\n  const inAnim = createKeyframeAnimation(options.in, 'in');\n\n  const outAnimation = document.documentElement.animate(outAnim.keyframes, {\n    duration: options.timeline === 'sequential' ? duration / 2 : duration,\n    easing: 'ease-in-out',\n  });\n\n  outAnimation.onfinish = () => {\n    window.location.href = href;\n    \n    document.documentElement.animate(inAnim.keyframes, {\n      duration: options.timeline === 'sequential' ? duration / 2 : duration,\n      easing: 'ease-in-out',\n    });\n  };\n}\n\nfunction createKeyframeAnimation(animOptions: TransitionAnimation, prefix: string): { keyframes: Keyframe[] } {\n  const fromStyles = Object.entries(animOptions.from as TransitionStyles).map(([key, value]) => `${kebabCase(key)}: ${value};`).join(' ');\n  const toStyles = Object.entries(animOptions.to as TransitionStyles).map(([key, value]) => `${kebabCase(key)}: ${value};`).join(' ');\n\n  const keyframes = `\n    @keyframes ${prefix}-animation {\n      from { ${fromStyles} }\n      to { ${toStyles} }\n    }\n  `;\n\n  const style = document.createElement('style');\n  style.textContent = keyframes;\n  document.head.appendChild(style);\n\n  return {\n    keyframes: [\n      { [prefix]: '0%' },\n      { [prefix]: '100%' }\n    ]\n  };\n}","// src/utils.ts\n\nexport function applyDefaults<T extends Record<string, any>>(options: Partial<T>, defaults: T): T {\n  const result = { ...defaults };\n  for (const key in options) {\n    if (Object.prototype.hasOwnProperty.call(options, key)) {\n      const value = options[key];\n      if (typeof value === 'object' && value !== null && key in result) {\n        result[key] = applyDefaults(\n          value as Partial<T[Extract<keyof T, string>]>,\n          result[key] as T[Extract<keyof T, string>]\n        );\n      } else {\n        result[key] = value as T[Extract<keyof T, string>];\n      }\n    }\n  }\n  return result;\n}\n\nexport function kebabCase(str: string): string {\n  return str.replace(/[A-Z]/g, letter => `-${letter.toLowerCase()}`);\n}"],"names":[],"version":3,"file":"href.mjs.map"}